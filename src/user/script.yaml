- constants:
  - const_variable_1
  - const_variable_2
  - const_variable_3
  description: תסריט לניהול שיחות מצד הפונה
  name: פונה
  snippets:
  - name: default
    steps:
    - say: 'שלום, הגעת למוקד סיוע לנפגעי גזענות ואפליה.

        לפני שנעביר את הפניה שלך למוקדנ/ית, נבקש ממך לענות על כמה שאלות, שיסייעו לנו להשיב במהירות.'
    - do:
        cmd: isWorkingTime
        variable: _is_working_time
    - switch:
        arg: _is_working_time
        cases:
        - match: 'true'
          steps:
          - say: לפני שנעביר את הפניה שלך למוקדנ/ית, נבקש ממך לענות על כמה שאלות, שיסייעו לנו להשיב במהירות.
        - default: true
          steps:
          - say: המוקדנים שלנו עובדים בימים א-ה בשעות 9:00 עד 17:00. כדי שנוכל לחזור אליך במהירות נבקש ממך לענות לנו על כמה שאלות
    - say: מה השם שלך? אם את/ה רוצ/ה להישאר אנונימי/ת בשלב זה כתבו "אנונימי"
    - wait:
        variable: full_name
    - do:
        cmd: createUser
        params:
        - context
        - record
        variable: _agent_link
    - say: כדי שנוכל לטפל בפניה אנו זקוקים לפרטי התקשרות. לא ייעשה בפרטים אלו כל שימוש חוץ מטיפול בתלונה בדרך שבה תאשר/י לנו.
    - goto: 'פרטי התקשרות: בחירת אמצעי יצירת קשר'
    - goto: 'תלונה: בחירת תחום/גורם'
    - goto: 'העלאת קבצים: האם להעלות קבצים?'
    - goto: 'תלונה: הוספת מידע נוסף'
    - goto: completed
  - name: 'פרטי התקשרות: בחירת אמצעי יצירת קשר'
    steps:
    - say: איך תרצה/תרצי שניצור איתך קשר בהמשך התהליך?
    - wait:
        options:
        - show: טלפון
          steps:
          - say: מה מספר הטלפון שלך?
          - wait:
              placeholder: 05x-xxx-yyyy
              validation: '[-.0-9()/+]{9,16}'
              variable: phone
        - show: דוא"ל
          steps:
          - say: מה כתובת הדוא"ל שלך?
          - wait:
              placeholder: me@mail.com
              validation: (([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))
              variable: email
        - show: וואסטאפ
          steps:
          - say: מה מספר הטלפון שלך שרשום בוואטסאפ?
          - wait:
              placeholder: 05x-xxx-yyyy
              validation: '[-.0-9()/+]{9,16}'
              variable: whatsapp
    - say: האם תרצה/תרצי שננסה ליצור איתך קשר באמצעי קשר נוספים?
    - wait:
        options:
        - show: כן
          steps:
          - goto: 'פרטי התקשרות: בחירת אמצעי יצירת קשר'
        - show: לא
          steps: []
  - name: 'תלונה: בחירת תחום/גורם'
    steps:
    - say: מי נהג כלפיך בגזענות או באופן מפלה? או לאיזה תחום קשור האירוע?
    - wait:
        options:
        - show: משטרה
          value: משטרה
        - show: מאבטח/ת
          value: מאבטח/ת
        - show: מסגרת חינוכית
          value: מסגרת חינוכית
        - show: תחום המגורים והדיור
          value: דיור
        - show: תחום הבריאות
          value: בריאות
        - show: אחר
          value: אחר
        variable: offender
    - switch:
        arg: offender
        cases:
        - match: משטרה
          steps:
          - goto: 'משטרה: בחירת סוג התלונה'
        - match: מאבטח/ת
          steps:
          - goto: 'מאבטח/ת: בחירת סוג התלונה'
        - match: מסגרת חינוכית
          steps:
          - goto: 'חינוך: בחירת מסגרת חינוכית'
        - match: דיור
          steps:
          - goto: 'דיור: בחירת סוג התלונה'
        - match: אחר
          steps:
          - goto: 'אחר: בירור פרטי הגורם הפוגע'
        - match: בריאות
          steps:
          - goto: 'בריאות: בחירת הגורם הפוגע'
  - name: 'בריאות: בחירת הגורם הפוגע'
    steps:
    - say: מי נקט/ה כלפיך בגזענות או באופן מפלה?
    - wait:
        options:
        - show: ארגון או מוסד רפואי
          value: ארגון או מוסד רפואי
        - show: רופא/ה
          value: רופא/ה
        - show: אח/אחות
          value: אח/אחות
        - show: עובד/ת אחר/ת בתחום הבריאות
          value: עובד/ת אחר/ת בתחום הבריאות
        - show: מטופל/ת
          value: מטופל/ת
        variable: offender_organization_category
    - switch:
        arg: offender_organization_category
        cases:
        - default: true
          steps:
          - say: האם ידוע לך השם של האדם או של האנשים שפגעו בך?
          - wait:
              options:
              - show: כן
                steps:
                - say: מה השם של האדם או האנשים שפגעו בכם? אם ידוע לכם מה התפקיד של אותם אנשים, אנא כתבו גם כן.
                - wait:
                    variable: offender_person_details
              - show: לא
                steps: []
        - match: ארגון או מוסד רפואי
          steps:
          - say: האם ידוע לך מה שמו של הארגון או המרכז הרפואי?
          - wait:
              options:
              - show: כן
                steps:
                - say: מה שמו של הארגון או המרכז הרפואי?
                - wait:
                    variable: offender_organization_details
              - show: לא
                steps: []
    - say: האם האירוע או הגורם הפוגע קשורים באחת מקופות החולים? אם כן, אנא בחרו בקופה הרלוונטית
    - wait:
        options:
        - show: לא יודע/ת, או שלא קשור לקופת חולים כלשהי
          value: ''
        - show: שירותי בריאות כללית
          value: שירותי בריאות כללית
        - show: מכבי שירותי בריאות
          value: מכבי שירותי בריאות
        - show: קופת חולים מאוחדת
          value: קופת חולים מאוחדת
        - show: קופת חולים לאומית
          value: קופת חולים לאומית
        variable: offender_organization_category
    - say: מה סוג האירוע עליו תרצה/תרצי לדווח?
    - wait:
        options:
        - show: סירוב להעניק טיפול על רקע גזעני או מפלה (לאום, דת, עדה, נטיה מינית, מין או מגדר, מוגבלות, גיל וכדומה)
          value: סירוב להעניק טיפול על רקע גזעני או מפלה
        - show: הערות גזעניות או מעליבות
          value: הערות גזעניות או מעליבות
        - show: אפליה בטיפול רפואי או היעדר נגישות לטיפול על רקע מקום המגורים
          value: אפליה בטיפול רפואי או היעדר נגישות לטיפול על רקע מקום המגורים
        - show: מניעת טיפול על רקע מעמד בישראל
          value: מניעת טיפול על רקע מעמד בישראל
        - show: העדר מענה בשפה המוכרת למטופל/ת
          value: העדר מענה בשפה המוכרת למטופל/ת
        - show: המרפאה/מרכז רפואי לא היו נגישים
          value: המרפאה/מרכז רפואי לא היו נגישים
        - show: אחר
          value: אחר
        variable: complaint_type
    - say: אנא תאר/י את המקרה, עם כמה שיותר פרטים (תאריכים, מקומות, שעות וכל מה שהתרחש)
    - wait:
        long: true
        variable: event_description
  - name: 'חינוך: בחירת מסגרת חינוכית'
    steps:
    - say: באיזו מסגרת חינוכית מדובר?
    - wait:
        options:
        - show: אוניברסיטה/מכללה
          value: אוניברסיטה/מכללה
        - show: בית ספר
          value: בית ספר
        - show: גן חובה
          value: גן חובה
        - show: גן טרום חובה
          value: גן טרום חובה
        - show: גן טרום טרום חובה
          value: גן טרום טרום חובה
        - show: גן פרטי לגיל הרך
          value: גן פרטי לגיל הרך
        - show: חוגים של רשות מקומית
          value: חוגים של רשות מקומית
        - show: אחר
          value: אחר
        variable: offender_organization_category
    - switch:
        arg: offender_organization_category
        cases:
        - match: אוניברסיטה/מכללה
          steps:
          - say: מהו שם המוסד/המכללה?
          - wait:
              variable: offender_organization
        - match: בית ספר
          steps:
          - say: מה שם בית הספר?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב נמצא בית הספר?
          - wait:
              variable: event_location
          - goto: 'חינוך: בחירת זרם חינוכי של המסגרת'
        - match: גן חובה
          steps:
          - say: מה שם הגן?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב נמצא הגן?
          - wait:
              variable: event_location
          - goto: 'חינוך: בחירת זרם חינוכי של המסגרת'
        - match: גן טרום חובה
          steps:
          - say: מה שם הגן?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב נמצא הגן?
          - wait:
              variable: event_location
          - goto: 'חינוך: בחירת זרם חינוכי של המסגרת'
        - match: גן טרום טרום חובה
          steps:
          - say: מה שם הגן?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב נמצא המוסד?
          - wait:
              variable: event_location
          - goto: 'חינוך: בחירת זרם חינוכי של המסגרת'
        - match: גן פרטי לגיל הרך
          steps:
          - say: מה שם הגן?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב נמצא הגן?
          - wait:
              variable: event_location
        - match: חוגים של רשות מקומית
          steps:
          - say: היכן או באיזו מסגרת התקיים החוג?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב מתקיים החוג?
          - wait:
              variable: event_location
        - match: אחר
          steps:
          - say: מהו הארגון או המסגרת בהם התקיים האירוע?
          - wait:
              variable: offender_organization
          - say: באיזו עיר או ישוב התרחש האירוע?
          - wait:
              variable: event_location
    - goto: 'חינוך: בירור הרקע לאפליה'
  - name: 'חינוך: בחירת זרם חינוכי של המסגרת'
    steps:
    - say: באיזה זרם חינוכי מדובר?
    - wait:
        options:
        - show: חינוך ממלכתי
          value: חינוך ממלכתי
        - show: חינוך ממלכתי-דתי
          value: חינוך ממלכתי דתי
        - show: חינוך חרדי
          value: חינוך חרדי
        - show: חינוך מיוחד
          value: חינוך מיוחד
        - show: אחר
          value: אחר
        variable: offender_details
  - name: 'חינוך: בירור הרקע לאפליה'
    steps:
    - say: על איזה רקע, לדעתך, הופלית או נהגו כלפיך בגזענות
    - wait:
        options:
        - show: מוצא, עדה או לאום, או צבע עור
          value: אפליה על רקע מוצא, עדה או לאום, או צבע עור
        - show: על רקע דת
          value: אפליה על רקע דת
        - show: על רקע מין, נטייה מינית או זהות מגדרית
          value: אפליה על רקע מין, נטייה מינית או זהות מגדרית
        - show: על רקע אחר
          steps:
          - say: על איזה רקע את/ה חושב/ת שהופלית?
          - wait:
              variable: complaint_type
          value: אחר
        variable: complaint_type
    - say: אנא תאר/י את המקרה, עם כמה שיותר פרטים
    - wait:
        long: true
        variable: event_description
  - name: 'משטרה: בחירת סוג התלונה'
    steps:
    - say: מהו סוג האירוע עליו תרצה/תרצי לדווח?
    - wait:
        options:
        - show: התנהגות או התבטאות גזענית מצד שוטר/ת
          value: התנהגות או התבטאות גזענית מצד שוטר/ת
        - show: פרופיילינג – הפעלת סמכות משטרתית על בסיס מראה, צבע עור וכדומה
          value: פרופיילינג – הפעלת סמכות משטרתית על בסיס מראה, צבע עור וכדומה
        - show: אחר
          value: אחר
        variable: complaint_type
    - say: תאר/י בפירוט את האירוע שהתרחש (כולל מקום, תאריך, פרטי השוטר)
    - wait:
        long: true
        variable: event_description
  - name: 'מאבטח/ת: בחירת סוג התלונה'
    steps:
    - say: מהו סוג האירוע עליו תרצו לדווח?
    - wait:
        options:
        - show: בידוק מפלה
          value: בידוק מפלה
        - show: אמירות גזעניות
          value: אמירות גזעניות
        - show: מניעת כניסה
          value: מניעת כניסה
        - show: אחר
          value: אחר
        variable: complaint_type
    - say: האם ידוע לך שמה של חברת האבטחה?
    - wait:
        options:
        - show: כן
          steps:
          - say: מה שמה של חברת האבטחה?
          - wait:
              variable: offender_organization_details
        - show: לא
          steps: []
    - say: האם ידוע לך השם של המאבטח/ת?
    - wait:
        options:
        - show: כן
          steps:
          - say: מה השם והפרטים הידועים לך לגבי המאבטח/ת?
          - wait:
              long: true
              variable: offender_person_details
        - show: לא
          steps: []
    - say: היכן התרחש האירוע?
    - wait:
        options:
        - show: קניון
          value: קניון
        - show: משרד ממשלתי
          value: משרד ממשלתי
        - show: תחבורה ציבורית (למשל, אוטובוס, מונית או תחנה מרכזית)
          value: תחבורה ציבורית
        - show: בית חולים
          value: בית חולים
        - show: מועדון
          value: מועדון
        - show: נתב"ג
          value: נתב"ג
        - show: אחר
          steps:
          - say: 'כתוב/כתבי היכן התרחש האירוע:'
          - wait:
              long: true
              variable: event_location
          value: אחר
        variable: event_location
    - say: תאר/י בפירוט את האירוע שהתרחש (כולל מקום, תאריך וכל מידע רלוונטי אחר)
    - wait:
        long: true
        variable: event_description
  - name: 'דיור: בחירת סוג התלונה'
    steps:
    - say: מהו סוג האירוע עליו תרצו לדווח?
    - wait:
        options:
        - show: אפליה בקבלה לישוב
          steps:
          - say: מהו סוג הישוב שקשור לאירוע?
          - wait:
              options:
              - show: ישוב קהילתי
                value: אפליה בקבלה לישוב קהילתי
              - show: שכונת הרחבה במושב או בקיבוץ
                value: אפליה בקבלה לשכונת הרחבה במושב או בקיבוץ
              - show: נחלה בקיבוץ או במושב
                value: אפליה בקבלה לנחלה בקיבוץ או במושב
              - show: אחר
                value: אפליה בקבלה לישוב מסוג לא מוגדר
              variable: complaint_type
          value: אפליה בקבלה לישוב
        - show: אפליה במכירת דירה על ידי חברת בניה/יזם/קבלן
          value: אפליה במכירת דירה על ידי חברת בניה/יזם/קבלן
        - show: אפליה במכירת דירת יד 2 מידי אדם פרטי
          value: אפליה במכירת דירת יד 2 מידי אדם פרטי
        - show: אפליה בהשכרת דירה מאדם פרטי
          value: אפליה בהשכרת דירה מאדם פרטי
        - show: אפליה של חברת תיווך
          steps:
          - do:
              cmd: offenderIsRealEstateCompany
              params:
              - record
          - say: האם ידוע לך מה השם של חברת התיווך או פרטים אחרים לגביה?
          - wait:
              options:
              - show: כן
                steps:
                - say: מהו שם חברת התיווך? אנא שלח/י לנו את כל הפרטים הרלוונטים שיש לך, כמו כתובת או טלפון
                - wait:
                    variable: offender_organization_details
              - show: לא
          - say: האם ידועים לך פרטים של עובד/ת או עובדים שהיו מעורבים באירוע?
          - wait:
              options:
              - show: כן
                steps:
                - say: מהו השם של העובד/ת או העובדים שהיו מעורבים באירוע?
                - wait:
                    long: true
                    variable: offender_person_details
              - show: לא
          value: אפליה של חברת תיווך
        - show: אחר
          value: אחר
        variable: complaint_type
    - say: היכן התרחש האירוע?
    - wait:
        variable: event_location
    - say: אנא תאר/י את המקרה, עם כמה שיותר פרטים
    - wait:
        long: true
        variable: event_description
  - name: 'אחר: בירור פרטי הגורם הפוגע'
    steps:
    - say: מהם המסגרת, הארגון או הדמות שעליהם תרצו לדווח?
    - wait:
        variable: offender
    - say: מהו סוג האירוע עליו תרצו לדווח?
    - wait:
        long: true
        variable: complaint_type
    - say: 'כתוב/כתבי היכן התרחש האירוע:'
    - wait:
        variable: event_location
    - say: אנא תאר/י את המקרה, עם כמה שיותר פרטים
    - wait:
        long: true
        variable: event_description
  - name: 'העלאת קבצים: האם להעלות קבצים?'
    steps:
    - say: האם יש בידיך צילומים, מסמכים או תיעוד של המקרה שתוכל/י להעביר כעת?
    - wait:
        options:
        - show: כן
          steps:
          - say: ניתן להעלות עד חמישה קבצים.
          - do:
              cmd: uploader
              params:
              - _file1
              - uploader
          - say: מה יש בקובץ ששלחתם?
          - wait:
              variable: file1description
          - say: ניתן להעלות עוד ארבעה קבצים.
          - say: האם יש בידיך צילומים, מסמכים או תיעוד נוסף שתרצה/תרצי לשלוח כעת?
          - wait:
              options:
              - show: כן
                steps:
                - do:
                    cmd: uploader
                    params:
                    - _file2
                    - uploader
                - say: מה יש בקובץ ששלחתם?
                - wait:
                    variable: file2description
                - say: ניתן להעלות עוד שלושה קבצים.
                - say: האם יש בידיך צילומים, מסמכים או תיעוד נוסף שתרצה/תרצי לשלוח כעת?
                - wait:
                    options:
                    - show: כן
                      steps:
                      - do:
                          cmd: uploader
                          params:
                          - _file3
                          - uploader
                      - say: מה יש בקובץ ששלחתם?
                      - wait:
                          variable: file3description
                      - say: ניתן להעלות עוד שני קבצים.
                      - say: האם יש בידיך צילומים, מסמכים או תיעוד נוסף שתרצה/תרצי לשלוח כעת?
                      - wait:
                          options:
                          - show: כן
                            steps:
                            - do:
                                cmd: uploader
                                params:
                                - _file4
                                - uploader
                            - say: מה יש בקובץ ששלחתם?
                            - wait:
                                variable: file4description
                            - say: ניתן להעלות עוד קובץ אחד.
                            - say: האם יש בידיך צילומים, מסמכים או תיעוד נוסף שתרצה/תרצי לשלוח כעת?
                            - wait:
                                options:
                                - show: כן
                                  steps:
                                  - do:
                                      cmd: uploader
                                      params:
                                      - _file5
                                      - uploader
                                  - say: מה יש בקובץ ששלחתם?
                                  - wait:
                                      variable: file5description
                                - show: לא
                                  steps: []
                          - show: לא
                            steps: []
                    - show: לא
                      steps: []
              - show: לא
                steps: []
        - show: לא
          steps: []
  - name: 'תלונה: הוספת מידע נוסף'
    steps:
    - say: תודה. קיבלנו ושמרנו את כל התשובות שלך. לפני שנסיים, האם ישנו מידע נוסף שתרצה/תרצי להוסיף?
    - wait:
        options:
        - show: כן
          steps:
          - say: מהו המידע או הפרטים הנוספים שתרצה/תרצי להוסיף?
          - wait:
              long: true
              variable: _add_more_data
          - do:
              cmd: addTextToField
              params:
              - record
              variable: event_description
        - show: לא
          steps: []
  - name: completed
    steps:
    - say: 'תודה לך שפנית אלינו.

        אנחנו נעבור על כל המידע והחומר ששלחת ונחזור אליך תוך 2 ימים.'
